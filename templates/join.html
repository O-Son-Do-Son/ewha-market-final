<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>join</title>
    <link rel="stylesheet" type="text/css" href="../static/join.css" />
</head>

<body>
    <div class="header">
        <img src="https://github.com/nzeong/Spring-study/assets/121355994/3e86b129-fe60-41d1-a71b-f5f8c2127b27">
        <p>회원가입</p>
    </div>

    <div class="input">
        {% with mesg = get_flashed_messages() %}
        {% if mesg !=[] %}
            <script>alert("{{ mesg[0] }}")</script>
        {% endif %}
        {% endwith %}
        <form method="post" action="/join_post">
            <div class="required">
                <p>필수 입력사항</p>

                <div class="required-box">

                    <div>
                        <label for="username">아이디</label>
                        <input type="text" id="username" name="username" required>
                        <button class="duplicate-check">중복 체크</button>
                    </div>

                    <div>
                        <label for="password">비밀번호</label>
                        <input type="password" id="password" name="password" required>
                        <span class="caution">* 영문자, 숫자, 특수문자 중 2개 이상 조합</span>
                    </div>

                    <div>
                        <label for="confirm-password">비밀번호 확인</label>
                        <input type="password" id="confirm-password" name="confirm-password" required>
                    </div>

                    <div>
                        <label for="email">이메일 주소</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                </div>

            </div>

            <div class="optional">
                <p>선택 입력사항</p>
                <div class="optional-box">
                    <div>
                        <label for="phone">전화번호</label>
                        <input type="tel" id="phone" name="phone">
                        <span class="caution">* '-' 제외하고 숫자만 입력해주세요</span>
                    </div>

                    <div>
                        <label for="birthdate">생일</label>
                        <input type="date" id="birthdate" name="birthdate">
                        <span class="caution">* 생일 입력 시 다양한 혜택이 있습니다</span>
                    </div>
                </div>
            </div>
            <div class="submit">
                <p></p>
                <input type="submit" value="가입하기">
            </div>
        </form>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var password = document.getElementById("password");
            var confirmPassword = document.getElementById("confirm-password");
            var submitButton = document.querySelector("input[type='submit']");
            var messageElement = document.getElementById("password-mismatch-message");

            confirmPassword.addEventListener("input", function () {
                if (confirmPassword.value !== password.value) {
                    messageElement.textContent = "비밀번호가 일치하지 않습니다!";
                    submitButton.disabled = true;
                } else {
                    messageElement.textContent = "";
                    submitButton.disabled = false;
                }
            });

            document.querySelector("form").addEventListener("submit", function (event) {
                if (confirmPassword.value !== password.value) {
                    messageElement.textContent = "비밀번호가 일치하지 않습니다!";
                    event.preventDefault();
                }
            });
        });
    </script>
</body>

</html>